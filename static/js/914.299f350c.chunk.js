"use strict";(self.webpackChunkreact_social_network=self.webpackChunkreact_social_network||[]).push([[914],{1914:function(e,t,n){n.r(t),n.d(t,{default:function(){return ue}});var s=n(1413),i=n(5671),o=n(3144),r=n(136),a=n(3668),l=n(2791),u=n(9439),c=n(2495),d=n(7280),h=n(4554),p=n(890),x=n(9218),f=n(184),g=function(e){var t=(0,l.useState)(!1),n=(0,u.Z)(t,2),s=n[0],i=n[1],o=(0,l.useState)(e.status),r=(0,u.Z)(o,2),a=r[0],c=r[1];(0,l.useEffect)((function(){c(e.status)}),[e.status]);return(0,f.jsxs)(h.Z,{children:[!s&&(0,f.jsx)(p.Z,{sx:{cursor:"pointer"},variant:"subtitle1",onDoubleClick:function(){i(!0)},children:e.status||"---"}),s&&(0,f.jsx)(x.Z,{onChange:function(e){c(e.currentTarget.value)},onBlur:function(){i(!1),e.updateStatus(a)},autoFocus:!0,value:a})]})},j=n(5705),m=n(132),Z="ProfileInfo_contactItem__5sIzw",b="ProfileInfo_cancelButton__OfPrC",v=n(5289),P=n(5661),S=n(9157),w=n(3767),k=n(1440),C=n(9658),A=n(6151),y=m.Ry().shape({fullName:m.Z_().min(2,"Must be longer than 2 characters !").max(25,"Must be shorter than 50 characters !").required("Required !"),lookingForAJobDescription:m.Z_().min(2,"Must be longer than 2 characters !").max(50,"Must be shorter than 50 characters !").required("Required !"),aboutMe:m.Z_().min(2,"Must be longer than 2 characters !").max(50,"Must be shorter than 50 characters !").required("Required !")}),T=function(e){var t=e.editMode,n=e.profile,s=e.handleSubmit,i=e.goToViewMode,o=JSON.parse(JSON.stringify(n)),r=Object.keys(n.contacts);r.forEach((function(e){null===o.contacts[e]&&(o.contacts[e]="")})),console.log(o);var a=(0,j.TA)({initialValues:o,validationSchema:y,onSubmit:function(e,t){var n=t.setStatus,o=t.setSubmitting;s(e,n,o,i)}});return(0,f.jsxs)(v.Z,{open:t,fullWidth:!0,maxWidth:"sm",children:[(0,f.jsx)(P.Z,{children:"Change profile data"}),(0,f.jsx)(S.Z,{children:(0,f.jsx)("form",{onSubmit:a.handleSubmit,children:(0,f.jsxs)(w.Z,{direction:"column",spacing:2,children:[(0,f.jsx)(x.Z,{name:"fullName",label:"Full name",placeholder:"Alex Jones",value:a.values.fullName,onChange:a.handleChange}),(0,f.jsxs)(h.Z,{children:[(0,f.jsx)(k.Z,{value:a.values.lookingForAJob}),(0,f.jsx)(p.Z,{component:"label",children:"Looking for a job"})]}),(0,f.jsx)(x.Z,{label:"My Skills",placeholder:"Type here",minRows:3,multiline:!0,name:"lookingForAJobDescription",value:a.values.lookingForAJobDescription,onChange:a.handleChange}),(0,f.jsx)(x.Z,{label:"About me",placeholder:"Type here",minRows:3,multiline:!0,name:"aboutMe",value:a.values.aboutMe,onChange:a.handleChange}),(0,f.jsxs)(w.Z,{direction:"column",spacing:2,children:[(0,f.jsx)(p.Z,{children:"Contacts:"}),r.map((function(e){return function(e){return(0,f.jsx)("div",{className:Z,children:(0,f.jsx)(x.Z,{label:e,name:"contacts.".concat(e),id:e,placeholder:e,onChange:a.handleChange})},e)}(e)}))]}),a.status&&(0,f.jsx)(C.Z,{severity:"error",children:a.status}),(0,f.jsx)(A.Z,{variant:"contained",type:"submit",disabled:a.isSubmitting,children:a.isSubmitting?"Please wait...":"Save"}),(0,f.jsx)(A.Z,{variant:"contained",sx:{color:"red"},onClick:i,type:"button",className:b,children:" Cancel"})]})})})]})},M=n(4721),I=n(6823),N=n(5818),_=n(3721),O=n(7355),z=n(6655),F=n(1783),J=n(6719),D=n(4523),R=n(9970),q=n(3136),W=n(255),V=n(6398),B=function(e){var t=e.contactName,n=e.contactValue;return(0,f.jsxs)(h.Z,{children:[(0,f.jsxs)(p.Z,{display:"flex",alignItems:"center",sx:{fontWeight:"bold"},children:["facebook"===t?(0,f.jsx)(z.Z,{fontSize:"large"}):"website"===t?(0,f.jsx)(F.Z,{fontSize:"large"}):"vk"===t?(0,f.jsx)(J.Z,{fontSize:"large"}):"twitter"===t?(0,f.jsx)(D.Z,{fontSize:"large"}):"instagram"===t?(0,f.jsx)(R.Z,{fontSize:"large"}):"youtube"===t?(0,f.jsx)(q.Z,{fontSize:"large"}):"github"===t?(0,f.jsx)(W.Z,{fontSize:"large"}):"mainLink"===t?(0,f.jsx)(V.Z,{fontSize:"large"}):t,": ",n]}),(0,f.jsx)(M.Z,{})]})},E=function(e){var t=e.profile,n=e.isOwner,s=e.goToEditMode;return(0,f.jsx)(h.Z,{children:(0,f.jsxs)(w.Z,{direction:"column",spacing:1,children:[(0,f.jsx)(M.Z,{textAlign:"right",children:n&&(0,f.jsx)(A.Z,{variant:"text",size:"small",color:"inherit",onClick:s,children:"Edit profile"})}),(0,f.jsxs)(p.Z,{sx:{fontWeight:"bold"},children:["Looking for a job: ",t.lookingForAJob?"Yes":"No"]}),t.lookingForAJob&&(0,f.jsxs)(p.Z,{sx:{fontWeight:"bold"},children:["My professional skills : ",t.lookingForAJobDescription]}),(0,f.jsxs)(p.Z,{sx:{fontWeight:"bold"},children:[" About me : ",t.aboutMe]}),(0,f.jsxs)(I.Z,{square:!0,elevation:0,sx:{borderBottom:"1px solid #dddddd",borderRadius:"0px"},children:[(0,f.jsx)(N.Z,{expandIcon:(0,f.jsx)(O.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",sx:{padding:0},children:(0,f.jsx)(p.Z,{sx:{fontWeight:"bold"},children:"Show Contacts"})}),(0,f.jsx)(_.Z,{children:Object.keys(t.contacts).map((function(e){return(0,f.jsx)(B,{contactName:e,contactValue:t.contacts[e]},e)}))})]})]})})},U=n(3400),L=n(3044),$=function(e){var t=e.isOwner,n=e.profile,s=e.status,i=e.updateStatus,o=e.updatePhoto,r=e.updateProfile,a=(0,l.useState)(!1),x=(0,u.Z)(a,2),j=x[0],m=x[1];if(!n)return(0,f.jsx)(c.Z,{});return(0,f.jsx)(h.Z,{children:(0,f.jsxs)(w.Z,{direction:"row",spacing:2,alignItems:"top",sx:{marginTop:"20px",marginBottom:"20px"},children:[(0,f.jsx)(h.Z,{flex:1,children:t?(0,f.jsxs)(U.Z,{sx:{width:"150px"},color:"primary","aria-label":"upload picture",component:"label",children:[(0,f.jsx)("input",{hidden:!0,type:"file",onChange:function(e){var t;null!==(t=e.target.files)&&void 0!==t&&t.length&&o(e.target.files[0])}}),(0,f.jsx)(L.Z,{src:null!=n.photos.large?n.photos.large:d,alt:"Avatar",sx:{width:"150px",height:"150px"}})]}):(0,f.jsx)(L.Z,{src:null!=n.photos.large?n.photos.large:d,alt:"Avatar",sx:{flex:2,width:"150px",height:"150px"}})}),(0,f.jsxs)(w.Z,{direction:"column",flex:5,spacing:1,alignItems:"left",children:[(0,f.jsx)(p.Z,{variant:"h6",children:n.fullName}),(0,f.jsx)(g,{status:s,updateStatus:i}),j?(0,f.jsx)(T,{profile:n,handleSubmit:function(e,t,n,s){r(e,t,n,s)},editMode:j,goToViewMode:function(){m(!1)}}):(0,f.jsx)(E,{profile:n,goToEditMode:function(){m(!0)},isOwner:t})]})]})})},H=n(5559),Y=n(6144),G=n(8556),K=function(e){return(0,f.jsxs)(h.Z,{children:[(0,f.jsxs)(w.Z,{direction:"row",spacing:2,marginTop:"20px",marginBottom:"20px",alignItems:"center",children:[(0,f.jsx)(L.Z,{sx:{width:"100px",height:"100px"},src:d}),(0,f.jsxs)(w.Z,{direction:"column",spacing:1,children:[(0,f.jsx)(p.Z,{flex:3,children:e.message}),(0,f.jsxs)(w.Z,{alignItems:"center",flex:1,direction:"row",spacing:1,children:[(0,f.jsx)(U.Z,{children:(0,f.jsx)(Y.Z,{})}),(0,f.jsx)(p.Z,{children:"60"}),(0,f.jsx)(U.Z,{children:(0,f.jsx)(G.Z,{})})]})]})]}),(0,f.jsx)(M.Z,{})]})},Q=n(3466),X=n(148),ee=function(e){var t=(0,j.TA)({initialValues:{newPostText:""},onSubmit:function(t){!function(t){e.addPost(t)}(t.newPostText),t.newPostText=""}});return(0,f.jsx)("form",{onSubmit:t.handleSubmit,children:(0,f.jsx)(w.Z,{direction:"column",display:"flex",spacing:1,children:(0,f.jsx)(x.Z,{sx:{flex:3},label:"New Post",placeholder:"Type here",minRows:3,multiline:!0,name:"newPostText",value:t.values.newPostText,onChange:t.handleChange,InputProps:{endAdornment:(0,f.jsx)(Q.Z,{position:"end",children:(0,f.jsx)(U.Z,{type:"submit",children:(0,f.jsx)(X.Z,{fontSize:"large"})})})}})})})},te=function(e){var t=e.posts.map((function(e){return(0,f.jsx)(K,{message:e.message,likesCount:e.likesCount,id:e.id},e.id)}));return(0,f.jsxs)(w.Z,{direction:"column",spacing:2,children:[(0,f.jsx)(p.Z,{variant:"h5",fontWeight:"bold",children:"Posts"}),(0,f.jsx)(ee,{addPost:e.addPost}),(0,f.jsx)(w.Z,{direction:"column-reverse",children:t})]})},ne=n(8687),se=(0,ne.$j)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){return e(H.Nw.addPostActionCreator(t))}}}))(te),ie=function(e){return(0,f.jsxs)(w.Z,{direction:"column",spacing:2,children:[(0,f.jsx)($,{updatePhoto:e.updatePhoto,isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,updateProfile:e.updateProfile}),(0,f.jsx)(se,{})]})},oe=n(6871),re=n(3221),ae=n(7781),le=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"refreshProfile",value:function(){var e=this.props.router.params.userId;e||(e=this.props.signedUserId),this.props.getProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){this.props.router.params.userId!==e.router.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,f.jsx)(ie,(0,s.Z)((0,s.Z)({},this.props),{},{isOwner:!this.props.router.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,updatePhoto:this.props.updatePhoto,updateProfile:this.props.updateProfile}))}}]),n}(l.Component);var ue=(0,ae.qC)((function(e){return function(t){var n=(0,oe.TH)(),i=(0,oe.s0)(),o=(0,oe.UO)();return(0,f.jsx)(e,(0,s.Z)((0,s.Z)({},t),{},{router:{location:n,navigate:i,params:o}}))}}),(0,ne.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,signedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getProfile:H.Ai,getStatus:H.lR,updateStatus:H.Nf,updatePhoto:H.tU,updateProfile:H.ck}),re.D)(le)},3221:function(e,t,n){n.d(t,{D:function(){return c}});var s=n(1413),i=n(5987),o=(n(2791),n(6871)),r=n(8687),a=n(184),l=["isAuth"],u=function(e){return{isAuth:e.auth.isAuth}};function c(e){return(0,r.$j)(u)((function(t){var n=t.isAuth,r=(0,i.Z)(t,l);return n?(0,a.jsx)(e,(0,s.Z)({},r)):(0,a.jsx)(o.Fg,{to:"/login"})}))}},7280:function(e,t,n){e.exports=n.p+"static/media/avatarPlaceholder.e9563ec482a44fa91ecf.png"}}]);
//# sourceMappingURL=914.299f350c.chunk.js.map